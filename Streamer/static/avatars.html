<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Virtual Streamer - Quản lý avatar</title>
        <!-- Bootstrap CSS -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <!-- Font Awesome for icons -->
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
        <!-- Custom styles -->
        <link rel="stylesheet" href="/static/style.css" />
    </head>
    <body>
        <div class="container-fluid">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-md-3 col-lg-2 sidebar text-white p-0">
                    <div class="p-3">
                        <h4 class="home">
                            <a
                                href="/"
                                class="text-white text-decoration-none page-dir"
                            >
                                <i class="fas fa-video"></i> Virtual Streamer
                            </a>
                        </h4>
                        <hr />
                        <nav class="nav flex-column">
                            <a
                                href="/admin"
                                class="nav-link text-white page-dir"
                            >
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                            </a>
                            <a
                                href="/products"
                                class="nav-link text-white page-dir"
                            >
                                <i class="fas fa-box"></i> Quản lý sản phẩm
                            </a>
                            <a
                                href="/sessions"
                                class="nav-link text-white page-dir"
                            >
                                <i class="fas fa-broadcast-tower"></i> Phiên
                                live
                            </a>
                            <a
                                href="/scripts"
                                class="nav-link text-white page-dir"
                            >
                                <i class="fas fa-file-alt"></i> Template script
                            </a>
                            <a
                                href="/avatars"
                                class="nav-link text-white page-dir active"
                            >
                                <i class="fas fa-user"></i> Quản lý avatar
                            </a>
                        </nav>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="col-md-9 col-lg-10 main-content">
                    <div class="container-fluid p-4">
                        <!-- Avatars Tab -->
                        <div id="avatars-tab" class="tab-content">
                            <div
                                class="d-flex justify-content-between align-items-center mb-4"
                            >
                                <h2>
                                    <i class="fas fa-user"></i> Quản lý avatar
                                </h2>
                                <button
                                    class="btn btn-primary"
                                    onclick="showCreateAvatarModal()"
                                >
                                    <i class="fas fa-plus"></i> Tạo avatar mới
                                </button>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <!-- Avatars list -->
                                    <div id="avatars-list" class="row"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <!-- Create Avatar Modal -->
        <div class="modal fade" id="createAvatarModal" tabindex="-1">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Tạo avatar mới</h5>
                        <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                        ></button>
                    </div>
                    <div class="modal-body">
                        <form id="createAvatarForm">
                            <div class="mb-3">
                                <label for="avatarName" class="form-label"
                                    >Tên avatar</label
                                >
                                <input
                                    type="text"
                                    class="form-control"
                                    id="avatarName"
                                    required
                                />
                            </div>
                            <div class="mb-3">
                                <label for="avatarFile" class="form-label"
                                    >Video avatar</label
                                >
                                <input
                                    type="file"
                                    class="form-control"
                                    id="avatarFile"
                                    accept="video/*"
                                    required
                                />
                                <small class="form-text text-muted"
                                    >Chỉ chấp nhận định dạng video (.mp4, .avi,
                                    .mov, .mkv, .webm).</small
                                >
                            </div>
                            <!-- Compress toggle -->
                            <div class="mb-3 form-check">
                                <input
                                    type="checkbox"
                                    class="form-check-input"
                                    id="avatarCompress"
                                />
                                <label
                                    class="form-check-label"
                                    for="avatarCompress"
                                    >Nén video (compress)</label
                                >
                            </div>
                            <!-- Compress options; hidden by default and shown when compress is checked -->
                            <div
                                id="compressOptions"
                                class="mb-3"
                                style="display: none"
                            >
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label
                                            for="compressFPS"
                                            class="form-label"
                                            >FPS sau nén</label
                                        >
                                        <input
                                            type="number"
                                            class="form-control"
                                            id="compressFPS"
                                            placeholder="ví dụ: 12"
                                            min="1"
                                        />
                                    </div>
                                    <div class="col-md-4">
                                        <label
                                            for="compressResolution"
                                            class="form-label"
                                            >Độ phân giải sau nén (px)</label
                                        >
                                        <input
                                            type="number"
                                            class="form-control"
                                            id="compressResolution"
                                            placeholder="ví dụ: 720"
                                            min="1"
                                        />
                                    </div>
                                    <div class="col-md-4">
                                        <label
                                            for="compressBitrate"
                                            class="form-label"
                                            >Bitrate sau nén (kbps)</label
                                        >
                                        <input
                                            type="number"
                                            class="form-control"
                                            id="compressBitrate"
                                            placeholder="ví dụ: 800"
                                            min="1"
                                        />
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                        >
                            Hủy
                        </button>
                        <button
                            type="button"
                            class="btn btn-primary"
                            onclick="createAvatar()"
                        >
                            Tạo avatar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Modal -->
        <div
            class="modal fade"
            id="loadingModal"
            tabindex="-1"
            data-bs-backdrop="static"
        >
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-3" id="loadingMessage">Đang xử lý...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- JavaScript dependencies -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Custom script -->
        <script src="static/avatars.js"></script>
    </body>
</html>
